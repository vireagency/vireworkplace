import{r as a,n as y,o as j,t as N,j as e,L as C}from"./index-DSewVFua.js";import{C as v,a as k,c as E,d as L,e as F,B as u}from"./card-EJ5g6USJ.js";import{L as P,I as S}from"./label-BahFRQBq.js";import{M as A}from"./mail-Bb_FWkSz.js";import{A as M}from"./arrow-left-Cfpt0CiH.js";import"./index-C13qTn-R.js";function H(){const[s,x]=a.useState(""),[r,m]=a.useState(!1),[i,l]=a.useState(""),n=y(),{secureAxios:c}=j(),d=a.useCallback(o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),[]),g=a.useCallback(async o=>{if(o.preventDefault(),!s.trim()){l("Email is required");return}if(!d(s)){l("Please enter a valid email address");return}try{m(!0),l("");const t=await c.post("/auth/forgot-password",{email:s.trim()});t.data.success?(N.success("Password reset email sent successfully!"),n("/otp-confirmation",{state:{email:s.trim(),forgotPasswordToken:t.data.token,mode:"forgot-password"}})):l(t.data.message||"Failed to send reset email")}catch(t){console.error("Forgot password error:",t);const w=t.response?.data?.message||t.message||"Failed to send reset email. Please try again.";l(w)}finally{m(!1)}},[s,d,c,n]),f=a.useCallback(()=>{n("/login")},[n]),h=a.useCallback(o=>{x(o.target.value),i&&l("")},[i]),p=a.useMemo(()=>s.trim()&&d(s),[s,d]),b=a.useMemo(()=>r?"Sending...":"Send Reset Link",[r]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(v,{className:"w-full max-w-md shadow-xl",children:[e.jsxs(k,{className:"text-center space-y-2",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-blue-600"})}),e.jsx(E,{className:"text-2xl font-bold text-gray-900",children:"Forgot Password?"}),e.jsx(L,{className:"text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(S,{id:"email",type:"email",placeholder:"Enter your email",value:s,onChange:h,className:"w-full",disabled:r,required:!0})]}),i&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:i}),e.jsxs(u,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!p||r,children:[r&&e.jsx(C,{className:"w-4 h-4 mr-2 animate-spin"}),b]}),e.jsxs(u,{type:"button",variant:"ghost",onClick:f,className:"w-full text-gray-600 hover:text-gray-800",disabled:r,children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Back to Login"]})]})})]})})}export{H as default};
